<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>
ilkka.github.io
 - Jekyll tag cloud
</title>
<link href='http://fonts.googleapis.com/css?family=Rosarivo:400,400italic|Oregano|Trocchi|Inconsolata:400,700' rel='stylesheet' type='text/css'>
<link href='/css/default.css' media='screen' rel='stylesheet' type='text/css'>
<link href='/css/wide.css' media='screen and (min-width: 820px)' rel='stylesheet' type='text/css'>
<link href='/css/narrow.css' media='screen and (max-width: 820px)' rel='stylesheet' type='text/css'>
<link href='/css/pygments/default.css' media='screen' rel='stylesheet' type='text/css'>
<link href='http://feeds.feedburner.com/ilkkagithubcom' rel='alternate' type='application/atom+xml'>
<meta content='nanoc 3' name='generator'>
<script>
  //<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3223507-4']);
    _gaq.push(['_trackPageview']);
    
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();
  //]]>
</script>
</head>
<body>
<div id='main-container'>
<div class='feed-icon-floater'>
<a href='http://feeds.feedburner.com/ilkkagithubcom'>
<img alt='Atom feed' src='/images/feed-icon-28x28.png'>
</a>

</div>
<div class='centered-container'>
<div id='header'>
<a class='sitetitle' href='/'>
ilkka.github.io
</a>
<h1>
Jekyll tag cloud
</h1>
</div>
<div id='content'>
<div class='post'>
<div class='postmeta'>
Posted on Sunday 21 November 2010 and tagged <a href="/tag/meta/">meta</a>, <a href="/tag/ruby/">ruby</a>, <a href="/tag/jekyll/">jekyll</a> and <a href="/tag/coding/">coding</a>.

<div class='navlinks'>
Previously:&nbsp;<a href="/blog/2010/11/20/hosting-a-jekyll-blog-with-extensions-on-github/">Hosting a Jekyll blog with extensions on Github</a>
Next:&nbsp;<a href="/blog/2010/11/28/qml-woes/">QML woes</a>

</div>
</div>
<div class='postbody'>
<p>Having <a href="/blog/2010/11/20/hosting-a-jekyll-blog-with-extensions-on-github">gotten archives
working</a>
nicely, I decided to next tackle the task of creating a tag cloud for
my blog. The <a href="https://github.com/mojombo/jekyll/wiki/Template-Data">Jekyll
docs</a> are,
sadly, a bit ambiguous on how exactly to get at all the available
categories, for example, but as with my archive plugin, I decided to
go ahead and try out stuff until something workable emerged. With
archive pages, all that needed to be done was to write a generator
plugin to create more pages. With tags, however, I want to do
more. Specifically, I want to generate a tag cloud into my layout.</p>

<p>Googling a bit I came across <a href="https://gist.github.com/364416">a gist</a>
where tag cloud generation was done in the <code>Rakefile</code>. I didn’t want
to clutter my (as-of-then-nonexistant) <code>Rakefile</code> with stuff like
this, and instead thought that the logical place to put this code is
in a plugin. I decided to implement the same basic idea though, where
the tag links go in <code>&lt;span&gt;</code>s that get dynamically styled with
different font sizes. Here’s the source of my new tag plugin:</p>

<script src="https://gist.github.com/710577.js?file=tag_cloud_tag.rb">
</script><p>The plugin class inherits from <code>Liquid::Tag</code> and has just one method
apart from the constructor, <code>render</code>. The <code>context</code> parameter to
<code>render</code> includes whatever data would be accessible in the template
via the <code>registers</code> hash.</p>

<blockquote>
  <p>Here I must take a moment to vent a very tiny bit at Jekyll: why
and/or how is it that while the <a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers">Liquid docs clearly state that only
tags in double curly brackets may resolve to
text</a>,
tags defined in Jekyll tag plugins <em>must</em> be put in brackets +
percent signs? Illogical, and it bit me on the ass more than once
as I was writing my plugin.</p>
</blockquote>

<p>The <code>render</code> method gets all the tags in all the articles from
<code>context.registers[:site].tags</code>. That’s a hash keyed on the tags as
strings, and the values are lists of articles that have that tag. The
<code>inject</code> on the next lines calculates the average length of the
article arrays. Next, I just iterate over all the tags once more, and
this time use the average to calculate a weight for every
tag. Finally, I output HTML for each tag, with a <code>&lt;span&gt;</code> that gets
its <code>font-size</code> set dynamically to a percentage based on the
weight. Finally the tag is registered with Liquid and it’s ready to
use… provided you remember to use the brackets-plus-percent signs
markup.</p>

<p>The tag page class and the associated generator are very similar to
the archive plugin, so I’m just going to direct you to the <a href="https://gist.github.com/710577">gist with
the source code</a>.</p>
</div>
</div>
<br style='break: both'>
<div class='related'>
<h3>More stuff like this</h3>
<ul>
<li>
<a href="/blog/2010/11/20/hosting-a-jekyll-blog-with-extensions-on-github/">Hosting a Jekyll blog with extensions on Github</a>
(2010-11-20)
</li>
<li>
<a href="/blog/2011/02/27/migrating_a_live_ubuntu_install_onto_lvm2/">Migrating a live Ubuntu install onto LVM2</a>
(2011-02-27)
</li>
<li>
<a href="/blog/2011/03/04/qtquick_2_scenegraph_glsl_fragment_shader_tutorial/">Qt Quick 2 QML Scene Graph GLSL fragment shader tutorial</a>
(2011-03-04)
</li>
</ul>

</div>
<div class='comments'>
<h3>Comments</h3>
<!-- begin disqus comment code -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
  * var disqus_identifier; [Optional but recommended: Define a
  unique identifier (e.g. post id or slug) for this thread] 
  */
  (function() {
  var dsq = document.createElement('script'); dsq.type =
  'text/javascript'; dsq.async = true;
  dsq.src = 'http://ilkkablog.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] ||
  document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view
  the <a href="http://disqus.com/?ref_noscript=ilkkablog">comments
    powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered
  by <span class="logo-disqus">Disqus</span></a>
<!-- end disqus comment code -->

<!-- begin disqus comment count code -->
<script type="text/javascript">
  var disqus_shortname = 'ilkkablog';
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/ilkkablog/count.js';
  (document.getElementsByTagName('HEAD')[0] ||
  document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>
<!-- end disqus comment count code -->

</div>
</div>
</div>
</div>
<div id='footer-container'>
<div id='footer'>
<div class='col'>
<h3>What else is here?</h3>
<ul>
<li>
<a href='/'>Front page</a>
</li>
<li>
Archives
<ul>
<li><a href="/archives/2010/11/">2010/11</a></li>
<li><a href="/archives/2010/12/">2010/12</a></li>
<li><a href="/archives/2011/01/">2011/1</a></li>
<li><a href="/archives/2011/02/">2011/2</a></li>
<li><a href="/archives/2011/03/">2011/3</a></li>
<li><a href="/archives/2011/05/">2011/5</a></li>
<li><a href="/archives/2011/10/">2011/10</a></li>
</ul>
</li>
</ul>

</div>
<div class='col'>
<h3>Tags</h3>
<ul class='tagcloud'>
<li style='font-size: 69.9384961563864%'>
<a href="/tag/meta/">meta</a>
</li>
<li style='font-size: 149.69506197546147%'>
<a href="/tag/ruby/">ruby</a>
</li>
<li style='font-size: 69.9384961563864%'>
<a href="/tag/jekyll/">jekyll</a>
</li>
<li style='font-size: 193.80930871145782%'>
<a href="/tag/coding/">coding</a>
</li>
<li style='font-size: 63.65616841209596%'>
<a href="/tag/qt/">qt</a>
</li>
<li style='font-size: 63.65616841209596%'>
<a href="/tag/qml/">qml</a>
</li>
<li style='font-size: 87.01563350411524%'>
<a href="/tag/ubuntu/">ubuntu</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/rake/">rake</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/photography/">photography</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/tools/">tools</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/vim/">vim</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/jitsu/">jitsu</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/ninja/">ninja</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/maemo/">maemo</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/n900/">n900</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/qtquick/">qtquick</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/glsl/">glsl</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/scenegraph/">scenegraph</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/opengl/">opengl</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/sysadmin/">sysadmin</a>
</li>
<li style='font-size: 60.90160003008207%'>
<a href="/tag/osx/">osx</a>
</li>
</ul>

</div>
<div class='col'>
<h3>Find me elsewhere</h3>
<ul style='list-style-type: none'>
<li>
<a href='http://twitter.com/ilkkalaukkanen'>
<img alt='twitter.com/ilkkalaukkanen' src='/images/follow_bird_me-a.png'>
</a>
</li>
<li>
<a href='https://plus.google.com/111305386307650364124?rel=author'>Google</a>
</li>
<li>
<a href='https://github.com/ilkka'>github.com/ilkka</a>
</li>
<li>
<a href='https://bitbucket.org/Ilkka'>bitbucket.org/Ilkka</a>
</li>
</ul>

</div>
<div id='credits'>
<p>This site was generated by <a href='http://nanoc.ws/'>Nanoc</a>. Fonts courtesy of <a href='http://www.google.com/fonts/'>Google Fonts</a>.</p>
</div>
</div>
</div>
</body>
</html>
